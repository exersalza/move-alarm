import{h as i,_ as x,p as y}from"./hooks.module.3a9cfe9f.js";import{l as v}from"./preact.module.551f0998.js";var P=0;function t(l,c,u,b,s,g){var r,a,d={};for(a in c)a=="ref"?r=c[a]:d[a]=c[a];var p={type:l,props:d,key:u,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--P,__i:-1,__u:0,__source:s,__self:g};if(typeof l=="function"&&(r=l.defaultProps))for(a in r)d[a]===void 0&&(d[a]=r[a]);return v.vnode&&v.vnode(p),p}function T(){const[l,c]=i(""),[u,b]=i(""),[s,g]=i(!1),[r,a]=i(!1),[d,p]=i([{name:"user1",path:"D:/fun/data/"},{name:"user1",path:"D:/fun/data/"},{name:"user1",path:"D:/fun/data/"},{name:"user1",path:"D:/fun/data/"},{name:"user1",path:"D:/fun/data/"},{name:"user1",path:"D:/fun/data/"},{name:"user1",path:"D:/fun/data/"},{name:"user1",path:"D:/fun/data/"},{name:"user1",path:"D:/fun/data/"},{name:"user2",path:"D:/fun/data/"}]),h=x(null),m=x(null);function _(){if(!s||!r){console.error("Invalid path or username on submit");return}fetch("http://localhost:6969/api/web/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,path:l})}).then(e=>{e.status===200&&console.log("success")}).then(e=>f()).catch(e=>{console.log(e)})}function D(e){return new RegExp("([A-Z]:[\\\\|/])((([a-zA-Z0-9]{2,255})[\\\\|/])*)([a-zA-Z0-9]{2,255})").test(e)}function w(e){return e.length>3&&!/\s/.test(e)}y(()=>{g(D(l)),a(w(u)),!(m===null||h===null)&&(s?m.current.style.borderColor="green":m.current.style.borderColor="red",r?h.current.style.borderColor="green":h.current.style.borderColor="red")},[l,u]);function f(){fetch("http://localhost:6969/api/user",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>{if(e.status===200)return e.json()}).then(e=>{p(e)}).catch(e=>{console.log(e)})}y(()=>{f()},[]);function C(e,n){console.log(e,n),fetch("http://localhost:6969/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,path:n})}).then(o=>{if(o.status===200)return o.json()}).then(o=>{f()}).catch(o=>{console.log(o)})}function U(e){fetch("http://localhost:6969/api/user/"+e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(n=>{if(n.status===200)return n.json()}).then(n=>{f()}).catch(n=>{console.log(n)})}return t("div",{children:[t("div",{class:"m-3 grid gap-3 md:max-w-[42rem] md:min-w-[42rem] sm:max-w-2xl bg-[#23262d] p-2 rounded-md",children:[t("div",{class:"grid gap-1",children:[t("p",{class:"text-md text-gray-300",children:"Enter your name:"}),t("input",{ref:h,class:`bg-gray-300 outline-none border-2 text-black py-2 px-2 rounded-md ${r?"border-green-500":"border-red-500"}`,placeholder:"xxXCoolUserXxx",type:"text",onInput:e=>{b(e.target.value)}})]}),t("div",{class:"grid gap-1",children:[t("p",{class:"text-md text-gray-300",children:"Enter your path:"}),t("input",{ref:m,class:`bg-gray-300 outline-none border-2 text-black py-2 px-2 rounded-md ${s?"border-green-500":"border-red-500"}`,placeholder:"D:/fun/data/",type:"text",onInput:e=>{c(e.target.value)}})]}),t("button",{class:"bg-green-500 py-3 px-2 w-full my-4 rounded-md text-green-900 disabled:bg-gray-400",onClick:_,disabled:!s||!r,children:"Submit"})]}),t("div",{class:"m-3 grid gap-3 md:max-w-[42rem] md:min-w-[42rem] sm:max-w-2xl max-h-96 bg-[#23262d] p-2 rounded-md ",children:t("div",{class:"grid gap-1 ",children:[t("p",{class:"text-md text-gray-300 text-2xl font-bold",children:"Users List"}),t("ul",{class:"overflow-y-auto max-h-[20rem] pr-3 p-2",children:d.map(e=>{const n=x(null);return t("li",{class:"flex-col gap-6",children:[t("div",{class:"flex gap-5 bg-[#1c1e24] p-2 my-2 rounded-md",children:[t("p",{class:"text-md text-gray-300",children:[t("p",{class:"font-bold",children:"Username:"})," ",e.name]}),t("p",{class:"text-md text-gray-300",children:[t("p",{class:"font-bold",children:"Current Path:"})," ",e.path]})]}),t("div",{children:[t("div",{class:"flex h-10 gap-5",children:[t("input",{ref:n,class:"bg-gray-300 w-full outline-none border-2 text-black py-1 px-2 rounded-md",placeholder:"D:/fun/data/",type:"text"}),t("button",{class:"bg-green-500 py-2 px-1 w-full rounded-md text-green-900",onClick:()=>{const o=n.current.value||e.path;C(e.name,o)},children:"Save new path"})]}),t("button",{class:"bg-red-500 py-3 px-2 w-full my-4 rounded-md text-red-900",onClick:()=>{U(e.name)},children:"Delete"})]})]})})})]})})]})}export{T as default};
